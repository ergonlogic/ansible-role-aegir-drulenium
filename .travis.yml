---
language: python
python: "2.7"

dist: trusty

env:
  global:
    - ANSIBLE_ROLES_PATH=tests/roles
  matrix:
    - ANSIBLE_PLAYBOOK=tests/playbooks/git.yml ANSIBLE_REQUIREMENTS=tests/roles/git_requirements.yml
    - ANSIBLE_PLAYBOOK=tests/playbooks/make.yml ANSIBLE_REQUIREMENTS=tests/roles/make_requirements.yml

install:
  - sudo make deps-ansible
  - pip install pyyaml jinja2
  - make ansible

script:
  # Bootstrap Drumkit
  - ". d"

  # Run playbook tests
  - make ansible-playbook-test-idempotence

